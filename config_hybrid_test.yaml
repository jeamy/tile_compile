# =========================
# Allgemein
# =========================
run_dir: ./run_hybrid_test
log_level: info

# =========================
# Data
# =========================
data:
  image_width: 3840
  image_height: 2160
  frames_min: 50
  color_mode: OSC
  bayer_pattern: GBRG
  linear_required: true

# =========================
# Pipeline
# =========================
pipeline:
  abort_on_fail: false
  phases:
    - scan_input
    - registration
    - done

# =========================
# Input
# =========================
input:
  pattern: "./data/*.fits"
  sort: numeric
  max_frames: 0

# =========================
# Global Metrics
# =========================
global_metrics:
  enabled: true
  weights:
    background: 0.25
    noise: 0.45
    gradient_energy: 0.30
  clamp:
    background: [0.0, 1.0]
    noise: [0.0, 1.0]
    gradient_energy: [0.0, 1.0]

# =========================
# Registrierung - HYBRID ENGINE
# =========================
registration:
  enabled: true
  engine: hybrid_phase_ecc
  reference_policy: global_weight
  downsample_factor: 2
  max_translation_px: 64
  allow_rotation: false
  max_rotation_deg: 5.0
  ecc:
    enabled: true
    iterations: 50
    epsilon: 1.0e-5
  min_score: 0.05
  fallback_to_identity: true

# =========================
# Output
# =========================
output:
  registered_dir: registered
  artifacts_dir: artifacts
  write_registered_frames: true
  write_global_metrics: true
  write_global_registration: true
